<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<h:head>
		<f:facet name="first">
			<meta http-equiv="X-UA-Compatible" content="IE=edge" />
			<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
			<meta name="viewport"
				content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
			<meta name="apple-mobile-web-app-capable" content="yes" />
		</f:facet>
		<title><ui:insert name="title">Willkommen zu #{msg['application.title']}</ui:insert></title>

		<!-- *Note: favicon generated and setup instruction taken from https://favicon.io/favicon-generator/ -->
		<link rel="apple-touch-icon" sizes="180x180"
			href="#{request.contextPath}/favicon_io/apple-touch-icon.png" />
		<link rel="icon" type="image/png" sizes="32x32"
			href="#{request.contextPath}/favicon_io/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16"
			href="#{request.contextPath}/favicon_io/favicon-16x16.png" />
		<link rel="manifest"
			href="#{request.contextPath}/favicon_io/site.webmanifest" />

		<h:outputStylesheet library="css" name="w3.css" />

		<!-- 
        	color themes, read from cookie name 'theme-color', if empty, set to default value 'w3-theme-light-blue' 
        -->
		<c:set var="theme_color" value="#{cookie['theme.color'].value}" />
		<c:if test="#{empty theme_color}">
			<c:set var="theme_color" value="w3-theme-light-blue" />
		</c:if>
		<h:outputStylesheet library="css" name="w3-theme/#{theme_color}.css" />

		<style>
html, body, h1, h2, h3, h4, h5 {
	font-family: "Open Sans", sans-serif
}
</style>
	</h:head>

	<h:body class="w3-theme-light" style="margin:0px;">
		<h1 style="text-align: center;">
			<ui:insert name="title">Willkommen zu #{msg['application.title']}</ui:insert>
		</h1>
		<h:form id="form" style="margin-top: 50px;">
			<p:growl id="msgs" showDetail="true" />
			<p:panel style="display: block; width: fit-content; margin: 0 auto;">
				<p:dataTable id="shoppingListItemTable"
					widgetVar="shoppingListItemTable" var="shoppingListItem"
					value="#{shoppingListController.selectedShoppingList}"
					editable="true" editMode="cell" selectionMode="single"
					selection="#{shoppingListItemController.selectedShoppingListItem}"
					rowKey="#{shoppingListItem.itemID}">
					<p:ajax event="cellEdit"
						listener="#{shoppingListItemController.onCellEdit}"
						update=":form:msgs" />
					<!-- 					<p:ajax event="rowSelect" -->
					<!-- 						listener="#{shoppingListItemController.onRowSelect}" /> -->
					<!-- 					<p:ajax event="rowUnselect" -->
					<!-- 						listener="#{shoppingListItemController.onRowUnselect}" /> -->
					<p:column headerText="ID">
						<h:outputText value="#{shoppingListItem.itemID}" />
					</p:column>
					<p:column headerText="Artikel" sortBy="#{shoppingListItem.title}"
						filterBy="#{shoppingListItem.title}">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{shoppingListItem.title}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{shoppingListItem.title}" style="width:96%"
									label="Artikel" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="Beschreibung">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{shoppingListItem.description}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{shoppingListItem.description}"
									style="width:96%" label="Beschreibung" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="Anzahl">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{shoppingListItem.quantity}" />
							</f:facet>
							<f:facet name="input">
								<p:inputNumber value="#{shoppingListItem.quantity}"
									style="width:96%" label="Anzahl" minValue="0" decimalPlaces="0" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="Preis">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{shoppingListItem.price}" />
							</f:facet>
							<f:facet name="input">
								<p:inputNumber value="#{shoppingListItem.price}"
									style="width:96%" label="Preis" minValue="0" decimalPlaces="2" />
							</f:facet>
						</p:cellEditor>
					</p:column>
					<p:column headerText="Erstelldatum">
						<h:outputText value="#{shoppingListItem.creationDate}" />
					</p:column>
					<p:column headerText="Ã„nderungsdatum">
						<h:outputText value="#{shoppingListItem.modificationDate}" />
					</p:column>
					<p:column headerText="Erledigt"
						sortBy="#{shoppingListItem.completed}"
						filterBy="#{shoppingListItem.completed}">
						<f:facet name="filter">
							<p:selectOneMenu onchange="PF('shoppingListItemTable').filter()"
								styleClass="custom-filter">
								<f:selectItem itemLabel="Alle" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItem itemLabel="ja" itemValue="#{true}" />
								<f:selectItem itemLabel="nein" itemValue="#{false}" />
							</p:selectOneMenu>
						</f:facet>
						<p:cellEditor>
							<f:facet name="output">
								<p:selectBooleanCheckbox value="#{shoppingListItem.completed}"
									disabled="true" />
							</f:facet>
							<f:facet name="input">
								<p:selectBooleanCheckbox value="#{shoppingListItem.completed}"
									disabled="false" />
							</f:facet>
						</p:cellEditor>
					</p:column>
				</p:dataTable>
			</p:panel>
		</h:form>
	</h:body>
</ui:composition>